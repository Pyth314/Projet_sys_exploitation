#include <SDL.h>        
#include <SDL_image.h>        
#include <pthread.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>


int main(int argc, char ** argv)
{
    int quit = 0;
    SDL_Event event;
    pthread_t thread1;
	int mx,my;
 
    SDL_Init(SDL_INIT_VIDEO);
 
    SDL_Window * window = SDL_CreateWindow("SDL2 Displaying Image",
        SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, 1024+128, 1024, 0);
 
    SDL_Renderer * renderer = SDL_CreateRenderer(window, -1, 0);
    //SDL_Surface * image = SDL_LoadBMP("whitehall_1024x1024.bmp");
    SDL_Surface * image = IMG_Load("fond_jeu.png");
    SDL_Surface * pawn = IMG_Load("gobutton.png");
    SDL_SetColorKey( pawn, SDL_TRUE, SDL_MapRGB( pawn->format, 0, 0, 0 ) );
    //SDL_Surface * pawn = SDL_LoadBMP("pawn.bmp");
    SDL_Surface * rond = IMG_Load("connectbutton.png");
SDL_Surface * tableau = IMG_Load("SH13_grille.png");
SDL_Surface * carte1 = IMG_Load("SH13_0.png");
SDL_Surface * carte2 = IMG_Load("SH13_1.png");
SDL_Surface * carte3 = IMG_Load("SH13_9.png");
    SDL_SetColorKey( rond, SDL_TRUE, SDL_MapRGB( rond->format, 0, 0, 0 ) );
    //SDL_Surface * rond = SDL_LoadBMP("rond.bmp");
    SDL_Texture * texture = SDL_CreateTextureFromSurface(renderer, image);
    SDL_Texture * texture_pawn = SDL_CreateTextureFromSurface(renderer, pawn);
    SDL_Texture * texture_rond = SDL_CreateTextureFromSurface(renderer, rond);
SDL_Texture * texture_tableau = SDL_CreateTextureFromSurface(renderer, tableau);
SDL_Texture * texture_carte1 = SDL_CreateTextureFromSurface(renderer, carte1);
SDL_Texture * texture_carte2 = SDL_CreateTextureFromSurface(renderer, carte2);
SDL_Texture * texture_carte3 = SDL_CreateTextureFromSurface(renderer, carte3);
	SDL_SetTextureAlphaMod(texture_rond,128);
 
    while (!quit)
    {
        //SDL_WaitEvent(&event);
 
	if (SDL_PollEvent(&event))
	{
		//printf("un event\n");
        	switch (event.type)
        	{
            		case SDL_QUIT:
                		quit = 1;
                		break;
			case  SDL_MOUSEBUTTONDOWN:
				SDL_GetMouseState( &mx, &my );
				printf("mx=%d my=%d\n",mx,my);
				break;
        	}
	}

        SDL_Rect dstrect = { 0, 0, 1024, 1024 };
        //SDL_Rect srcrect_pawn = { 0, 0, 87, 131 };
        SDL_Rect dstrect_pawn = { 402, 424, 93, 66 };
        SDL_Rect dstrect_rond = { 0, 0, 128, 108 };
SDL_Rect dstrect_tableau = { 0, 479, 1023, 370 };
SDL_Rect dstrect_carte1= { 160, 177, 190, 191 };
SDL_Rect dstrect_carte2 = { 464, 173, 190, 191 };
SDL_Rect dstrect_carte3 = { 718, 166, 190, 191};
        SDL_RenderCopy(renderer, texture, NULL, &dstrect);

        //SDL_RenderCopy(renderer, texture, &srcrect, NULL);
        //SDL_RenderCopy(renderer, texture, NULL, NULL);
        SDL_RenderCopy(renderer, texture_pawn, NULL, &dstrect_pawn);
        SDL_RenderCopy(renderer, texture_rond, NULL, &dstrect_rond);
SDL_RenderCopy(renderer, texture_tableau, NULL, &dstrect_tableau);
SDL_RenderCopy(renderer, texture_carte1, NULL, &dstrect_carte1);
SDL_RenderCopy(renderer, texture_carte2, NULL, &dstrect_carte2);
SDL_RenderCopy(renderer, texture_carte3, NULL, &dstrect_carte3);
        SDL_RenderPresent(renderer);
    }
 
    SDL_DestroyTexture(texture);
    SDL_FreeSurface(image);
    SDL_DestroyRenderer(renderer);
    SDL_DestroyWindow(window);
 
    SDL_Quit();
 
    return 0;
}
